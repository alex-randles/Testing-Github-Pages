var NUM_CENTYEAR=30,BUL_TIMECOMPONENT=!1,BUL_YEARSCROLL=!0,RE_NUM=/^\-?\d+$/,DEBUG=!1,calendars=[],currentX=390,currentY=650;function calendar1(e,t,r,a,n,i){null==t&&(t=""),this.gen_date=cal_gen_date1,this.gen_time=cal_gen_time1,this.gen_tsmp=cal_gen_tsmp1,this.prs_date=cal_prs_date1,this.prs_time=cal_prs_time1,this.prs_tsmp=cal_prs_tsmp1,this.popup=cal_popup1,this.get_target=cal_get_target,this.getImageDirPath=getImageDirPath,this.format=r||"dd/mm/yyyy",this.separator=a||"/",this.timeSeparator=n||":",this.dateTimeSeparator=i||" ",this.target_name=e,this.time_comp=BUL_TIMECOMPONENT,this.year_scroll=BUL_YEARSCROLL,calendars=getVariable(t,"calendars"),this.id=calendars.length,calendars[this.id]=this}function cal_get_target(e){return null==e&&(e=""),document.forms[e+"form1"].elements[this.target_name]}function calculate_cal_position(e,t){var r=document.getElementById(t),a=r.getBoundingClientRect().y||r.getBoundingClientRect().top,n=r.getBoundingClientRect().x||r.getBoundingClientRect().left,i=window.innerHeight,l=window.innerWidth,s=window.scrollY||window.pageYOffset;a+200+r.offsetHeight>=i?setVariable(e,"currentY",a-200+s):setVariable(e,"currentY",a+r.offsetHeight+s),n+253>=l?setVariable(e,"currentX",n-(n+253-l)-20):setVariable(e,"currentX",n)}function cal_popup1(e,t,r){if(null!=t&&27==t.keyCode)return document.getElementById("FloatCalendarDiv").style.display="none",!1;window.CALENDAR_PICKER_TRIGGER=this.target_name,null==e&&(e="");var a=document.forms[e+"form1"].elements[this.target_name];if(!a)return cal_error("Error calling the calendar: no target control specified");if(null==a.value)return cal_error("Error calling the calendar: parameter specified is not valid target control");if(this.dt_current=this.prs_tsmp(r||a.value),this.dt_current&&buttonsEnabled(e)){null!=t&&calculate_cal_position(e,this.target_name);var n=unescape(getResourcePath(e,getVariable(e,"calendarPagePath"))),i=document.getElementById(e+"FloatCalendarDiv");i?i.removeChild(i.childNodes[0]):i=createFloatingDiv(e+"FloatCalendarDiv",document.body);var l=function(e){var t=e.target;do{t=t.parentNode}while("FloatCalendarDiv"!==t.id&&null!==t.parentNode);if("FloatCalendarDiv"==t.id&&"closeCalendarPopup"!==e.target.id)return!1;document.getElementById("FloatCalendarDiv").style.display="none",window.removeEventListener("mousedown",l)};window.addEventListener("mousedown",l),i.style.position="absolute",i.style.width="253px",i.style.height=(this.time_comp?228:203)+"px",i.style.top=getVariable(e,"currentY")+"px",i.style.left=getVariable(e,"currentX")+"px",i.style.border="0px",i.style.display="block",i.style.zIndex="1050";var s=getVariable(e,"calendarPopup");s=s.replace(/<\\\//g,"</"),i.innerHTML=s,document.getElementById("calendarIframe").src=n+"?datetime="+this.dt_current.valueOf()+"&id="+this.id+"&namespace="+e+"&format="+escape(this.format)+"&separator="+escape(this.separator),window.CALENDAR_FOCUS_TRIGGER&&a.onfocus&&window.execute(a,"onfocus",window.CALENDAR_FOCUS_TRIGGER)}}function cal_gen_tsmp1(e){return this.gen_date(e)+" "+this.gen_time(e)}function cal_gen_date1(e){var t=this.format.split(this.separator),r="";return"dd"==t[0]?r=(e.getDate()<10?"0":"")+e.getDate():"mm"==t[0]?r=(e.getMonth()<9?"0":"")+(e.getMonth()+1):"yyyy"==t[0]&&(r=e.getFullYear()),r+=this.separator,"dd"==t[1]?r+=(e.getDate()<10?"0":"")+e.getDate():"mm"==t[1]?r+=(e.getMonth()<9?"0":"")+(e.getMonth()+1):"yyyy"==t[1]&&(r+=e.getFullYear()),r+=this.separator,"dd"==t[2]?r+=(e.getDate()<10?"0":"")+e.getDate():"mm"==t[2]?r+=(e.getMonth()<9?"0":"")+(e.getMonth()+1):"yyyy"==t[2]&&(r+=e.getFullYear()),r}function cal_gen_time1(e){return(e.getHours()<10?"0":"")+e.getHours()+this.timeSeparator+(e.getMinutes()<10?"0":"")+e.getMinutes()+this.timeSeparator+(e.getSeconds()<10?"0":"")+e.getSeconds()}function cal_prs_tsmp1(e){if(!e)return new Date;if(RE_NUM.exec(e))return new Date(e);var t=e.split(this.dateTimeSeparator);return 2==t.length?this.prs_time(t[1],this.prs_date(t[0])):this.prs_date(e)}function cal_prs_date1(e){var t=e.split(this.separator);if(3!=t.length)return cal_error("Invalid date format: '"+e+"'.\nFormat accepted is "+this.format+".");if(!t[0])return cal_error("Invalid date format: '"+e+"'.\nNo day of month value can be found.");if(!RE_NUM.exec(t[0]))return cal_error("Invalid day of month value: '"+t[0]+"'.\nAllowed values are unsigned integers.");if(!t[1])return cal_error("Invalid date format: '"+e+"'.\nNo month value can be found.");if(!RE_NUM.exec(t[1]))return cal_error("Invalid month value: '"+t[1]+"'.\nAllowed values are unsigned integers.");if(!t[2])return cal_error("Invalid date format: '"+e+"'.\nNo year value can be found.");if(!RE_NUM.exec(t[2]))return cal_error("Invalid year value: '"+t[2]+"'.\nAllowed values are unsigned integers.");var r=new Date;r.setDate(1);var a=getDay(this.format,e,this.separator),n=getMonth(this.format,e,this.separator),i=getYear(this.format,e,this.separator);if(n<1||n>12)return cal_error("Invalid month value: '"+n+"'.\nAllowed range is 01-12.");r.setMonth(n-1),i<100&&(i=Number(i)+(i<NUM_CENTYEAR?2e3:1900)),r.setFullYear(i);var l=new Date(i,n,0);return r.setDate(a),r.getMonth()!=n-1?cal_error("Invalid day of month value: '"+a+"'.\nAllowed range is 01-"+l.getDate()+"."):r}function getDay(e,t,r){return getPart(e,t,"dd","1",r)}function getMonth(e,t,r){return getPart(e,t,"mm","1",r)}function getYear(e,t,r){return getPart(e,t,"yyyy","2005",r)}function getPart(e,t,r,a,n){var i=t.split(n),l=e.split(n);return l[0]==r?i[0]:l[1]==r?i[1]:l[2]==r?i[2]:a}function cal_prs_time1(e,t){if(!t)return null;var r=String(e||"").split(this.timeSeparator);if(r[0]){if(!RE_NUM.exec(r[0]))return cal_error("Invalid hours value: '"+r[0]+"'.\nAllowed values are unsigned integers.");if(!(r[0]<24))return cal_error("Invalid hours value: '"+r[0]+"'.\nAllowed range is 00-23.");t.setHours(r[0])}else{var a=new Date(t);t.setHours(0),0!=t.getHours()&&(t=a).setHours(1)}if(r[1]){if(!RE_NUM.exec(r[1]))return cal_error("Invalid minutes value: '"+r[1]+"'.\nAllowed values are unsigned integers.");if(!(r[1]<60))return cal_error("Invalid minutes value: '"+r[1]+"'.\nAllowed range is 00-59.");t.setMinutes(r[1])}else t.setMinutes(0);if(r[2]){if(!RE_NUM.exec(r[2]))return cal_error("Invalid seconds value: '"+r[2]+"'.\nAllowed values are unsigned integers.");if(!(r[2]<60))return cal_error("Invalid seconds value: '"+r[2]+"'.\nAllowed range is 00-59.");t.setSeconds(r[2])}else t.setSeconds(0);return t.setMilliseconds(0),t}function cal_error(e){return DEBUG&&console.log(e),new Date}function cal_new_calendar1(e,t,r,a,n,i,l){e[t]=new calendar1(t,r,a,n,i,l)}var CALENDAR_FOCUS_COORDS={cellIndex:0,rowIndex:0};